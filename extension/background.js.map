{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/background/index.ts","webpack:///./src/background/context-menu.ts","webpack:///./src/background/send-to-download.ts","webpack:///./node_modules/unfetch/dist/unfetch.mjs"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","context_menu_1","chrome","runtime","onInstalled","addListener","createContextMenu","send_to_download_1","contextMenus","id","title","contexts","onClicked","_a","menuItemId","sendToDownload","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","length","push","__importDefault","mod","unfetch_1","_this","windows","getCurrent","populate","window","found","tabs","find","tab","active","undefined","storage","local","items","formData","_b","FormData","append","url","default","webUiUrl","method","XMLHttpRequest","u","a","ok","status","statusText","responseURL","text","responseText","json","JSON","parse","blob","Blob","response","clone","headers","keys","entries","toLowerCase","has","open","onload","getAllResponseHeaders","replace","onerror","withCredentials","credentials","setRequestHeader","send"],"mappings":"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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 128);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar context_menu_1 = require(\"./context-menu\");\nchrome.runtime.onInstalled.addListener(function () {\n    context_menu_1.createContextMenu();\n});\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createContextMenu = void 0;\nvar send_to_download_1 = require(\"./send-to-download\");\nfunction createContextMenu() {\n    chrome.contextMenus.create({\n        id: 'send-to-download',\n        title: 'この小説を Narou.rb でダウンロード',\n        contexts: ['all'],\n    });\n}\nexports.createContextMenu = createContextMenu;\nchrome.contextMenus.onClicked.addListener(function (_a) {\n    var menuItemId = _a.menuItemId;\n    switch (menuItemId) {\n        case 'send-to-download':\n            send_to_download_1.sendToDownload();\n            break;\n    }\n});\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sendToDownload = void 0;\nvar unfetch_1 = __importDefault(require(\"unfetch\"));\nfunction sendToDownload() {\n    var _this = this;\n    chrome.windows.getCurrent({ populate: true }, function (window) {\n        var _a;\n        var found = (_a = window.tabs) === null || _a === void 0 ? void 0 : _a.find(function (tab) { return tab.active; });\n        if (found === undefined) {\n            return;\n        }\n        chrome.storage.local.get('webUiUrl', function (items) { return __awaiter(_this, void 0, void 0, function () {\n            var formData;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        formData = new FormData();\n                        formData.append('targets', (_a = found.url) !== null && _a !== void 0 ? _a : '');\n                        formData.append('mail', 'false');\n                        return [4 /*yield*/, unfetch_1.default(items.webUiUrl + \"/api/download\", {\n                                method: 'POST',\n                                body: formData,\n                            })];\n                    case 1:\n                        _b.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); });\n    });\n}\nexports.sendToDownload = sendToDownload;\n","export default function(e,n){return n=n||{},new Promise(function(t,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(JSON.parse(s.responseText))},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var l in s.open(n.method||\"get\",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(e,n,t){o.push(n=n.toLowerCase()),u.push([n,t]),i[n]=i[n]?i[n]+\",\"+t:t}),t(a())},s.onerror=r,s.withCredentials=\"include\"==n.credentials,n.headers)s.setRequestHeader(l,n.headers[l]);s.send(n.body||null)})}\n//# sourceMappingURL=unfetch.mjs.map\n"],"sourceRoot":""}